apiVersion: kuttl.dev/v1beta1
kind: TestAssert
timeout: 300
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: 02-check-users
data:
  clustercheck: |
    GRANT PROCESS ON *.* TO `clustercheck`@`localhost`
    GRANT SYSTEM_USER ON *.* TO `clustercheck`@`localhost`
  monitor: |
    GRANT SELECT, RELOAD, PROCESS, SUPER, REPLICATION CLIENT ON *.* TO `monitor`@`%`
    GRANT BACKUP_ADMIN,SERVICE_CONNECTION_ADMIN,SYSTEM_USER ON *.* TO `monitor`@`%`
    GRANT SELECT ON `performance_schema`.* TO `monitor`@`%`
  operator: |
    GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, RELOAD, SHUTDOWN, PROCESS, FILE, REFERENCES, INDEX, ALTER, SHOW DATABASES, SUPER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, REPLICATION SLAVE, REPLICATION CLIENT, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, CREATE USER, EVENT, TRIGGER, CREATE TABLESPACE, CREATE ROLE, DROP ROLE ON *.* TO `operator`@`%` WITH GRANT OPTION
    GRANT APPLICATION_PASSWORD_ADMIN,AUDIT_ABORT_EXEMPT,AUDIT_ADMIN,AUTHENTICATION_POLICY_ADMIN,BACKUP_ADMIN,BINLOG_ADMIN,BINLOG_ENCRYPTION_ADMIN,CLONE_ADMIN,CONNECTION_ADMIN,ENCRYPTION_KEY_ADMIN,FLUSH_OPTIMIZER_COSTS,FLUSH_STATUS,FLUSH_TABLES,FLUSH_USER_RESOURCES,GROUP_REPLICATION_ADMIN,GROUP_REPLICATION_STREAM,INNODB_REDO_LOG_ARCHIVE,INNODB_REDO_LOG_ENABLE,PASSWORDLESS_USER_ADMIN,PERSIST_RO_VARIABLES_ADMIN,REPLICATION_APPLIER,REPLICATION_SLAVE_ADMIN,RESOURCE_GROUP_ADMIN,RESOURCE_GROUP_USER,ROLE_ADMIN,SERVICE_CONNECTION_ADMIN,SESSION_VARIABLES_ADMIN,SET_USER_ID,SHOW_ROUTINE,SYSTEM_USER,SYSTEM_VARIABLES_ADMIN,TABLE_ENCRYPTION_ADMIN,XA_RECOVER_ADMIN ON *.* TO `operator`@`%` WITH GRANT OPTION
  orchestrator: |
    GRANT RELOAD, PROCESS, SUPER, REPLICATION SLAVE, REPLICATION CLIENT ON *.* TO `orchestrator`@`%`
    GRANT SYSTEM_USER ON *.* TO `orchestrator`@`%`
    GRANT SELECT ON `meta`.* TO `orchestrator`@`%`
    GRANT SELECT ON `mysql`.`slave_master_info` TO `orchestrator`@`%`
  replication: |
    GRANT REPLICATION SLAVE ON *.* TO `replication`@`%`
    GRANT SYSTEM_USER ON *.* TO `replication`@`%`
  xtrabackup: |
    GRANT RELOAD, PROCESS, REPLICATION_SLAVE_ADMIN, LOCK TABLES, REPLICATION CLIENT ON *.* TO `xtrabackup`@`localhost`
    GRANT BACKUP_ADMIN,SYSTEM_USER ON *.* TO `xtrabackup`@`localhost`
    GRANT SELECT ON `performance_schema`.`keyring_component_status` TO `xtrabackup`@`localhost`
    GRANT SELECT ON `performance_schema`.`log_status` TO `xtrabackup`@`localhost`
